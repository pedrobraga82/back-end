{"ast":null,"code":"var _jsxFileName = \"/home/pedrobraga/Projetos/nfefront/src/Components/NFE/NFEListAdmin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Fragment } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Header from '../Header';\nimport NFETable from './NFETable';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport DownloadLink from \"react-download-link\";\nimport { ExportCSV } from './ExportCSV';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    selectEmpty: {\n      marginTop: theme.spacing(2)\n    }\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  }\n}));\nexport default function NFEListAdmin() {\n  _s();\n\n  const classes = useStyles();\n  const [dataini, SetDataIni] = useState(null);\n  const [datafim, SetDataFim] = useState(null);\n  const [data, SetData] = useState([{}]);\n  const [cnpj, SetCnpj] = useState(\"\");\n  const [username, SetUsername] = useState(\"\");\n  const [users, SetUsers] = useState(\"\");\n  const [nfe, SetNfe] = [{}];\n  const params = useParams();\n  const [selectedDate, handleDateChange] = useState(new Date());\n  useEffect(() => {\n    if (users === \"\") {\n      let url = 'http://localhost:8082/api/userslist';\n      axios.get(url).then(response => {\n        let data = response.data;\n        let dados = [{}];\n        data.forEach(obj => {\n          dados.push(obj);\n        });\n        SetUsers(dados);\n      }).catch(err => {\n        alert(\"Erro ao listar usuÃ¡rios \" + err);\n      });\n    }\n\n    return () => {//cleanup\n    };\n  }, [dataini, datafim, cnpj]);\n\n  const GetNfes = e => {\n    e.preventDefault();\n    let url = `http://localhost:8082/nfelist/${cnpj}/${dataini}/${datafim}`;\n    axios.get(url, {\n      params: {\n        cnpj,\n        dataini,\n        datafim\n      }\n    }).then(response => {\n      SetData(response.data);\n    }).catch(err => {\n      alert(\"Erro ao trazer dados das nfes \" + err);\n    });\n  };\n\n  const ExportExcel = () => {\n    let url = `http://localhost:8082/nfe/exportexcel/${cnpj}/${dataini}/${datafim}`;\n    axios.get(url, {\n      params: {\n        cnpj,\n        dataini,\n        datafim\n      }\n    }).then(response => {\n      /*#__PURE__*/\n      _jsxDEV(DownloadLink, {\n        label: \"Save\",\n        filename: response.data,\n        exportFile: () => \"My cached data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this); //SetData(response.data);\n\n    }).catch(err => {\n      alert(\"Erro ao trazer dados das nfes \" + err);\n    });\n  };\n\n  const handleChange = e => {\n    // setAge(event.target.value);\n    e.preventDefault();\n\n    switch (e.target.name) {\n      case \"dataini\":\n        SetDataIni(e.target.value);\n        break;\n\n      case \"datafim\":\n        SetDataFim(e.target.value);\n        break;\n\n      case \"cnpj\":\n        let username = e.target.value;\n        let user = users.filter(e => {\n          return e.username === username;\n        });\n        SetUsername(username); //SetCnpj(JSON.stringify(user[0].cnpj).substring(1,cnpj.length-1))\n\n        SetCnpj(user[0].cnpj);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.container,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          name: \"dataini\",\n          id: dataini,\n          value: dataini,\n          label: \"Data Inicial\",\n          type: \"date\",\n          format: \"dd/MM/yyyy\",\n          defaultValue: \"24-05-2018\",\n          onChange: handleChange,\n          className: classes.textField,\n          InputLabelProps: {\n            shrink: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"datafim\",\n          id: datafim,\n          value: datafim,\n          label: \"Data Final\",\n          type: \"date\",\n          defaultValue: \"24-05-2018\",\n          onChange: handleChange,\n          className: classes.textField,\n          InputLabelProps: {\n            shrink: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          name: \"cnpj\",\n          value: username,\n          onChange: handleChange,\n          displayEmpty: true,\n          className: classes.selectEmpty,\n          inputProps: {\n            'aria-label': 'Without label'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"em\", {\n              children: \"Selecionar CNPJ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 26\n          }, this), users && users.map(user => {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: user.username,\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 34\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"default\",\n          size: \"small\",\n          onClick: GetNfes,\n          children: \"Listar Nfe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(NFETable, {\n        dados: data && data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"default\",\n        size: \"small\",\n        onClick: ExportExcel,\n        children: \"Exportar Nfes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ExportCSV, {\n      csvData: data && data,\n      fileName: cnpj\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 9\n  }, this);\n}\n\n_s(NFEListAdmin, \"NMHRKRDXMj7aa7f7pEiUCgWsC0o=\", false, function () {\n  return [useStyles, useParams];\n});\n\n_c = NFEListAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFEListAdmin\");","map":{"version":3,"sources":["/home/pedrobraga/Projetos/nfefront/src/Components/NFE/NFEListAdmin.js"],"names":["React","useEffect","useState","Fragment","makeStyles","TextField","Header","NFETable","Select","MenuItem","axios","useParams","Button","DownloadLink","ExportCSV","useStyles","theme","container","display","flexWrap","selectEmpty","marginTop","spacing","textField","marginLeft","marginRight","width","NFEListAdmin","classes","dataini","SetDataIni","datafim","SetDataFim","data","SetData","cnpj","SetCnpj","username","SetUsername","users","SetUsers","nfe","SetNfe","params","selectedDate","handleDateChange","Date","url","get","then","response","dados","forEach","obj","push","catch","err","alert","GetNfes","e","preventDefault","ExportExcel","handleChange","target","name","value","user","filter","shrink","map"],"mappings":"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","sourcesContent":["import React,{useEffect,useState, Fragment} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Header from '../Header';\nimport NFETable from './NFETable';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport DownloadLink from \"react-download-link\";\nimport {ExportCSV} from './ExportCSV';\n\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    selectEmpty: {\n        marginTop: theme.spacing(2),\n      },\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200,\n  },\n}));\n\nexport default function NFEListAdmin() {\n\n    const classes = useStyles();\n    const [dataini,SetDataIni] = useState(null)\n    const [datafim,SetDataFim] = useState(null)\n    const [data,SetData] = useState([{}])\n    const [cnpj,SetCnpj] = useState(\"\")\n    const [username,SetUsername] = useState(\"\")\n    const [users,SetUsers] = useState(\"\")\n    const [nfe,SetNfe] = [{}]\n    const params = useParams();\n\n    const [selectedDate, handleDateChange] = useState(new Date());\n\n\n\n    useEffect(() => {\n\n        if (users === \"\") {\n            let url =  'http://localhost:8082/api/userslist' \n\n            axios.get(url)\n\n                .then((response) => {    \n\n                let data = response.data;\n                let dados = [{}]\n        \n                 data.forEach(obj => {\n                dados.push(obj)\n                })\n\n                SetUsers(dados);\n            \n            })\n            .catch((err) => {\n                alert(\"Erro ao listar usuÃ¡rios \" + err)\n            })  \n        }    \n    \n        \n\n        return () => {\n            //cleanup\n        }\n    }, [dataini,datafim,cnpj])\n\n\n   const GetNfes = (e) => {\n\n    e.preventDefault()\n\n    \n     let url = `http://localhost:8082/nfelist/${cnpj}/${dataini}/${datafim}`;\n\n\n     axios.get(url, {\n        params: {\n          cnpj,\n          dataini,\n          datafim\n        }\n      })\n    .then((response) => {\n\n        SetData(response.data);\n\n    })\n    .catch((err) => {\n\n        alert(\"Erro ao trazer dados das nfes \" + err);\n    })  \n \n   }\n    \n\n   const ExportExcel = () => {\n\n\n    let url = `http://localhost:8082/nfe/exportexcel/${cnpj}/${dataini}/${datafim}`;\n        \n      axios.get(url, {\n        params: {\n          cnpj,\n          dataini,\n          datafim\n        }\n      })\n    .then((response) => {\n\n\n        <DownloadLink\n            label=\"Save\"\n            filename={response.data}\n            exportFile={() => \"My cached data\"}\n        />\n        //SetData(response.data);\n\n    })\n    .catch((err) => {\n\n        alert(\"Erro ao trazer dados das nfes \" + err);\n    })  \n \n      \n\n\n   }\n\n    const handleChange = (e) => {\n       // setAge(event.target.value);\n\n       e.preventDefault();\n\n       switch(e.target.name) {\n\n           case \"dataini\":\n                SetDataIni(e.target.value)\n                 break;\n           case \"datafim\":\n                SetDataFim(e.target.value)\n                 break;\n           case \"cnpj\":\n\n                let username = e.target.value;  \n                let user = users.filter((e) => {\n                  return e.username === username\n                });\n                SetUsername(username)\n                //SetCnpj(JSON.stringify(user[0].cnpj).substring(1,cnpj.length-1))\n                SetCnpj(user[0].cnpj)\n                break;\n           default:\n               break;\n       }\n\n\n\n    };\n\n    return (\n        <div>\n            <div>\n                <Header />\n            </div>\n            <br></br>\n            <br></br>\n            <div>\n                    \n                <form className={classes.container} noValidate>\n\n                     <TextField\n                    name=\"dataini\"\n                    id={dataini}\n                    value={dataini}\n                    label=\"Data Inicial\"\n                    type=\"date\"\n                    format=\"dd/MM/yyyy\"\n                    defaultValue=\"24-05-2018\"\n                    onChange={handleChange}\n                    className={classes.textField}\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    /> \n                    <TextField\n                    name=\"datafim\"\n                    id={datafim}\n                    value={datafim}\n                    label=\"Data Final\"\n                    type=\"date\"\n                    defaultValue=\"24-05-2018\"\n                    onChange={handleChange}\n                    className={classes.textField}\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    />\n\n                    <Select\n                        name=\"cnpj\"\n                        value={username}\n                        onChange={handleChange}\n                        displayEmpty\n                        className={classes.selectEmpty}\n                        inputProps={{ 'aria-label': 'Without label' }}\n                    >\n                         <MenuItem value=\"\">\n                            <em>Selecionar CNPJ</em>\n                        </MenuItem>\n                        {users && users.map((user) => {\n                            return(\n                                 <MenuItem  value={user.username}>{user.username}</MenuItem>\n\n                            );   \n                        })}\n\n                        {/* <MenuItem value={20}>Twenty</MenuItem>\n                        <MenuItem value={30}>Thirty</MenuItem> */}\n                    </Select>\n\n                </form>\n                <br></br>\n                <br></br>\n                <div>\n                        <Button variant=\"contained\" color=\"default\" size='small'  onClick={GetNfes}>Listar Nfe</Button>\n                    </div>\n            </div>  \n            <div>\n                <NFETable dados={data && data} />\n            </div>\n            <div>\n            <Button variant=\"contained\" color=\"default\" size='small'  onClick={ExportExcel}>Exportar Nfes</Button>\n           </div>\n           <ExportCSV csvData={data && data} fileName={cnpj} />\n\n        </div>\n\n        )\n}\n"]},"metadata":{},"sourceType":"module"}