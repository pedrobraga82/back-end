{"ast":null,"code":"import _slicedToArray from\"/home/pedrobraga/eclipse-workspace2020/nfview/backnfe/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Header from'../Header';import axios from'axios';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import Modal from'react-modal';import{Redirect}from'react-router-dom';import{useHistory}from'react-router-dom';import{useParams}from'react-router-dom';import TextField from'@material-ui/core/TextField';import AttachFileIcon from'@material-ui/icons/AttachFile';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function UserList(){var useState=React.useState;var history=useHistory();var _useState=useState([{title:'id',field:'id'},{title:'arquivo',field:'arquivo'},{title:'cnpj',field:'cnpj'},{title:'endereco',field:'endereco'},{title:'ie',field:'ie',width:130},{title:'password',field:'password'},{title:'role',field:'role'},{title:'salt',field:'salt'},{title:'token',field:'token'},{title:'empresa',field:'empresa'}]),_useState2=_slicedToArray(_useState,2),columns=_useState2[0],setColumns=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],SetUsers=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),arquivo=_useState6[0],SetArquivo=_useState6[1];function EditUser(e){var cnpj=e.target.value;var user=users.filter(function(e){//alert(ie)  \nreturn e.cnpj===cnpj;});history.push(\"/edituser/\".concat(JSON.stringify(user[0].id)));}function CadCert(e){e.preventDefault();var cnpj=e.target.name;var user=users.filter(function(e){return e.cnpj===cnpj;});var formData=new FormData();formData.append(\"file\",e.target.files[0],cnpj);formData.append(\"id\",user[0].id);var url=\"/api/caduser/file/\".concat(user[0].id);fetch(url,{method:'POST',body:formData}).then(//response => response.json();\nalert('')).then(function(result){return console.log('Files successfully uploaded!');}).catch(function(error){return console.log('error occurred!');});}function Dados(){{return users.map(function(result){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[result.username,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[result.empresa,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",result.cnpj,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",result.ie]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",value:result.cnpj,size:\"sm\",onClick:EditUser,children:\"Editar\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"botao\",name:result.cnpj,size:\"sm\",onChange:CadCert})})]});});}}useEffect(function(){var url='/api/userslist';axios.get(url).then(function(response){var data=response.data;var dados=[{}];data.forEach(function(obj){dados.push(obj);});SetUsers(dados);}).catch(function(err){alert(\"Erro ao listar usuários \"+err);});return function(){//cleanup\n};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:styles.center,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Empresa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CNPJ\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users&&Dados()})]})]});}var styles={center:{//margin: 'auto',\nwidth:'90%',border:'3px solid green'//  padding: '10px'\n}};","map":{"version":3,"sources":["/home/pedrobraga/eclipse-workspace2020/nfview/backnfe/nfefront/src/Components/User/UserList.js"],"names":["React","useState","useEffect","Header","axios","Table","Button","Modal","Redirect","useHistory","useParams","TextField","AttachFileIcon","UserList","history","title","field","width","columns","setColumns","users","SetUsers","undefined","arquivo","SetArquivo","EditUser","e","cnpj","target","value","user","filter","push","JSON","stringify","id","CadCert","preventDefault","name","formData","FormData","append","files","url","fetch","method","body","then","alert","result","console","log","catch","error","Dados","map","username","empresa","ie","get","response","data","dados","forEach","obj","err","styles","center","border"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport Header from '../Header';\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-modal';\nimport { Redirect } from 'react-router-dom'\nimport { useHistory } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\n\nexport default function UserList() {\n  const { useState } = React;\n  const history = useHistory();\n\n  \n\n  const [columns, setColumns] = useState([\n    { title: 'id', field: 'id' },\n    { title: 'arquivo', field: 'arquivo'},\n    { title: 'cnpj', field: 'cnpj' },\n    { title: 'endereco', field: 'endereco'},\n    { title: 'ie', field: 'ie', width: 130 },\n    { title: 'password', field: 'password' },\n    { title: 'role', field: 'role'},\n    { title: 'salt', field: 'salt'},\n    { title: 'token', field: 'token' },\n    { title: 'empresa', field: 'empresa' }\n    \n  ]);\n\n  const [users,SetUsers] = useState(\"\");\n  const [arquivo,SetArquivo] = useState(undefined);\n\n\n  function EditUser(e) {\n\n      const cnpj = e.target.value;\n      const user = users.filter((e) => {\n        //alert(ie)  \n        return e.cnpj === cnpj\n      });\n\n      history.push(`/edituser/${JSON.stringify(user[0].id)}`) \n\n  } \n\n  function CadCert(e) {\n\n    e.preventDefault()\n\n    \n    const cnpj = e.target.name;\n      \n    const user = users.filter((e) => {\n          \n          return e.cnpj === cnpj\n        });\n\n        let formData = new FormData();\n        formData.append(\"file\",e.target.files[0],cnpj)\n        formData.append(\"id\",user[0].id);\n    let url =  `/api/caduser/file/${user[0].id}`\n        fetch(url, { \n            method: 'POST',\n            body: formData\n          }).then(\n              //response => response.json();\n              alert('')\n              )\n          .then(result => console.log('Files successfully uploaded!'))\n          .catch(error => console.log('error occurred!')); \n        \n\n\n\n  }\n\n\n   function Dados() {\n\n    {  \n       return users.map((result) =>  {\n\n        return(\n         <tr>\n            <td>{result.username} </td>\n            <td>{result.empresa} </td> \n            <td> {result.cnpj} </td> \n            <td> {result.ie}</td> \n            <td>\n            <Button variant=\"secondary\" value={result.cnpj} size=\"sm\" onClick={EditUser}>\n              Editar\n           </Button>\n           </td>\n{/*           <TextField variant=\"outlined\" type=\"file\" label=\"Arquivo\" \n               margin=\"dense\" name=\"arquivo\" value={arquivo}                        \n                 onChange={CadCert}/>  */} \n            <td>\n              <input type=\"file\" id =\"botao\" name={result.cnpj} size=\"sm\"  onChange={CadCert}>\n              </input>\n              </td>     \n\n\n\n           \n         </tr> ) \n       \n\n     })\n\n }\n\n\n\n   }\n\n  useEffect(() => {\n\n\n        let url =  '/api/userslist' \n\n        axios.get(url)\n      .then((response) => {    \n            let data = response.data;\n            let dados = [{}]\n\n\n          data.forEach(obj => {\n            dados.push(obj)\n          })\n\n          SetUsers(dados);\n            \n              })\n        .catch((err) => {\n            alert(\"Erro ao listar usuários \" + err)\n        })  \n        \n\n\n        return () => {\n            //cleanup\n        }\n    }, [])\n\n\n  return (\n\n    <div style={styles.center}>\n      <Header />\n      <br></br>\n      <br></br>\n      <br></br>\n      \n      <Table striped bordered hover variant=\"dark\" >\n      <thead>\n        <tr>\n          <th>Username</th>\n          <th>Empresa</th>\n          <th>CNPJ</th>\n          <th>IE</th>  \n        </tr>\n      </thead>\n      <tbody>\n\n        {users && Dados()}\n     </tbody> \n\n    </Table>\n\n\n\n  </div>\n\n\n  )\n}\n\n\n\nconst styles= {\n  center: {\n    //margin: 'auto',\n    width: '90%',\n    border: '3px solid green',\n  //  padding: '10px'\n  }\n  \n  \n}"]},"metadata":{},"sourceType":"module"}