{"ast":null,"code":"import _defineProperty from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/pedrobraga/Projetos/nfefront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import AppBar from'@material-ui/core/AppBar';import Toolbar from'@material-ui/core/Toolbar';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import Typography from'@material-ui/core/Typography';import Container from'@material-ui/core/Container';import AuthService from'./AuthService';import axios from'axios';import{doLogin}from\"../../actions/loginActions\";import base64 from\"base-64\";import utf8 from\"utf8\";import{useHistory}from\"react-router-dom\";import{makeStyles}from'@material-ui/core/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1),width:'25ch'}}};});function Historico(){var history=useHistory();var classes=useStyles();}var LoginComponent=/*#__PURE__*/function(_React$Component){_inherits(LoginComponent,_React$Component);var _super=_createSuper(LoginComponent);function LoginComponent(props){var _this;_classCallCheck(this,LoginComponent);_this=_super.call(this,props);_this.login=function(e){e.preventDefault();var credentials={username:_this.state.username,password:_this.state.password};AuthService.login(credentials).then(function(res){if(res.data.status===200){localStorage.setItem(\"userInfo\",JSON.stringify(res.data.result));_this.props.history.push('/list-user');}else{_this.setState({message:res.data.message});}console.log(credentials);});};_this.onChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.state={username:'',password:'',message:''};_this.login=_this.login.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginComponent,[{key:\"componentDidMount\",value:function componentDidMount(){localStorage.clear();}},{key:\"doLogin\",value:function doLogin(){var _this2=this;//this.props.dispatch(\n//    let url =  'https://localhost:8443/api/authentication?username=' + this.state.username +  '&password=' + base64.encode(utf8.encode(this.state.password))    \nvar url='/api/authentication?username='+this.state.username+'&password='+base64.encode(utf8.encode(this.state.password));axios.post(url).then(function(response){var variavel=response.data;var token=variavel.split(\"token:\")[1].split(\",\")[0];var username=variavel.split(\"username:\")[1].split(\",\")[0];var cnpj=variavel.split(\"cnpj:\")[1].split(\",\")[0];var role=variavel.split(\"role:\")[1].split(\",\")[0].split('}')[0];localStorage.setItem(\"token\",token);localStorage.setItem(\"username\",username);localStorage.setItem(\"role\",role);localStorage.setItem(\"cnpj\",cnpj);if(role==\"ADMIN\"){_this2.props.history.push(\"/menuadmin\");}else{_this2.props.history.push(\"/menuuser\");}}).catch(function(err){alert('Erro na autenticação '+err);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"NfView - Visualiza\\xE7\\xE3o de NFes\"})})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:styles.center,children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:styles.notification,children:this.state.message}),\"                    \",/*#__PURE__*/_jsx(\"div\",{style:styles.notification,children:/*#__PURE__*/_jsx(TextField,{label:\"Username\",defaultValue:\"Username\",variant:\"outlined\",name:\"username\",value:this.state.username,onChange:this.onChange})}),/*#__PURE__*/_jsx(\"div\",{style:styles.notification,children:/*#__PURE__*/_jsx(TextField,{type:\"password\",label:\"Password\",defaultValue:\"password\",variant:\"outlined\",name:\"password\",value:this.state.password,onChange:this.onChange})}),/*#__PURE__*/_jsx(\"div\",{style:styles.notification,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:this.doLogin.bind(this),children:\"Login\"})})]})]})]});}}]);return LoginComponent;}(React.Component);var styles={center:{display:'flex',justifyContent:'center'},notification:{display:'flex',justifyContent:'center',color:'#dc3545',margin:'10px'}};export default LoginComponent;","map":{"version":3,"sources":["/home/pedrobraga/Projetos/nfefront/src/Components/Login/LoginComponent.js"],"names":["React","AppBar","Toolbar","TextField","Button","Typography","Container","AuthService","axios","doLogin","base64","utf8","useHistory","makeStyles","useStyles","theme","root","margin","spacing","width","Historico","history","classes","LoginComponent","props","login","e","preventDefault","credentials","username","state","password","then","res","data","status","localStorage","setItem","JSON","stringify","result","push","setState","message","console","log","onChange","target","name","value","bind","clear","url","encode","post","response","variavel","token","split","cnpj","role","catch","err","alert","styles","center","notification","Component","display","justifyContent","color"],"mappings":"w5BAEC,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,SAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,MAAjB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,UAAT,KAA2B,0BAA3B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGD,UAAU,CAAC,SAACE,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJ,uBAAwB,CACtBC,MAAM,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADc,CAEtBC,KAAK,CAAE,MAFe,CADpB,CADiC,CAAZ,EAAD,CAA5B,CAYA,QAASC,CAAAA,SAAT,EAAqB,CAEjB,GAAOC,CAAAA,OAAO,CAAIT,UAAU,EAA5B,CACA,GAAMU,CAAAA,OAAO,CAAGR,SAAS,EAAzB,CAGH,C,GAGKS,CAAAA,c,4HAGF,wBAAYC,KAAZ,CAAkB,gDACd,uBAAMA,KAAN,EADc,MAwDjBC,KAxDiB,CAwDT,SAACC,CAAD,CAAO,CACZA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,WAAW,CAAG,CAACC,QAAQ,CAAE,MAAKC,KAAL,CAAWD,QAAtB,CAAgCE,QAAQ,CAAE,MAAKD,KAAL,CAAWC,QAArD,CAApB,CACAxB,WAAW,CAACkB,KAAZ,CAAkBG,WAAlB,EAA+BI,IAA/B,CAAoC,SAAAC,GAAG,CAAI,CACvC,GAAGA,GAAG,CAACC,IAAJ,CAASC,MAAT,GAAoB,GAAvB,CAA2B,CACvBC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACC,IAAJ,CAASM,MAAxB,CAAjC,EACA,MAAKhB,KAAL,CAAWH,OAAX,CAAmBoB,IAAnB,CAAwB,YAAxB,EACH,CAHD,IAGM,CACF,MAAKC,QAAL,CAAc,CAACC,OAAO,CAAEV,GAAG,CAACC,IAAJ,CAASS,OAAnB,CAAd,EACH,CAEDC,OAAO,CAACC,GAAR,CAAYjB,WAAZ,EACH,CATD,EAUH,CArEiB,OAuElBkB,QAvEkB,CAuEP,SAACpB,CAAD,CAAO,CAAE,MAAKgB,QAAL,oBAAiBhB,CAAC,CAACqB,MAAF,CAASC,IAA1B,CAAiCtB,CAAC,CAACqB,MAAF,CAASE,KAA1C,GAAoD,CAvEtD,CAEd,MAAKnB,KAAL,CAAa,CACTD,QAAQ,CAAE,EADD,CAETE,QAAQ,CAAE,EAFD,CAGTY,OAAO,CAAE,EAHA,CAAb,CAKA,MAAKlB,KAAL,CAAa,MAAKA,KAAL,CAAWyB,IAAX,+BAAb,CAPc,aAQjB,C,4DAED,4BAAoB,CAChBd,YAAY,CAACe,KAAb,GAEH,C,uBAGH,kBAAU,iBACR;AACA;AAEA,GAAIC,CAAAA,GAAG,CAAI,gCAAkC,KAAKtB,KAAL,CAAWD,QAA7C,CAAyD,YAAzD,CAAwEnB,MAAM,CAAC2C,MAAP,CAAc1C,IAAI,CAAC0C,MAAL,CAAY,KAAKvB,KAAL,CAAWC,QAAvB,CAAd,CAAnF,CAGAvB,KAAK,CAAC8C,IAAN,CAAWF,GAAX,EACQpB,IADR,CACa,SAACuB,QAAD,CAAc,CAEhB,GAAIC,CAAAA,QAAQ,CAAGD,QAAQ,CAACrB,IAAxB,CAEA,GAAIuB,CAAAA,KAAK,CAAGD,QAAQ,CAACE,KAAT,CAAe,QAAf,EAAyB,CAAzB,EAA4BA,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAAZ,CACA,GAAI7B,CAAAA,QAAQ,CAAG2B,QAAQ,CAACE,KAAT,CAAe,WAAf,EAA4B,CAA5B,EAA+BA,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAf,CACA,GAAIC,CAAAA,IAAI,CAAGH,QAAQ,CAACE,KAAT,CAAe,OAAf,EAAwB,CAAxB,EAA2BA,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAX,CACA,GAAIE,CAAAA,IAAI,CAAGJ,QAAQ,CAACE,KAAT,CAAe,OAAf,EAAwB,CAAxB,EAA2BA,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,EAAyCA,KAAzC,CAA+C,GAA/C,EAAoD,CAApD,CAAX,CAGAtB,YAAY,CAACC,OAAb,CAAsB,OAAtB,CAA+BoB,KAA/B,EACArB,YAAY,CAACC,OAAb,CAAsB,UAAtB,CAAkCR,QAAlC,EACAO,YAAY,CAACC,OAAb,CAAsB,MAAtB,CAA8BuB,IAA9B,EACAxB,YAAY,CAACC,OAAb,CAAsB,MAAtB,CAA8BsB,IAA9B,EAGC,GAAIC,IAAI,EAAE,OAAV,CAAmB,CACf,MAAI,CAACpC,KAAL,CAAWH,OAAX,CAAmBoB,IAAnB,CAAwB,YAAxB,EACJ,CAFA,IAGI,CACD,MAAI,CAACjB,KAAL,CAAWH,OAAX,CAAmBoB,IAAnB,CAAwB,WAAxB,EAEH,CAKJ,CA5BR,EA6BQoB,KA7BR,CA6Bc,SAACC,GAAD,CAAS,CACdC,KAAK,CAAC,wBAA0BD,GAA3B,CAAL,CACD,CA/BR,EA+BY,C,sBAoBZ,iBAAS,CACL,mBACI,MAAC,KAAD,CAAO,QAAP,yBACI,KAAC,MAAD,EAAQ,QAAQ,CAAC,QAAjB,uBACI,KAAC,OAAD,wBACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAC,QAA/B,iDADJ,EADJ,EADJ,cAQI,MAAC,SAAD,EAAW,QAAQ,CAAC,IAApB,wBACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAEE,MAAM,CAACC,MAAvC,mBADJ,cAEI,qCACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAED,MAAM,CAACE,YAAvC,UAAsD,KAAKpC,KAAL,CAAWa,OAAjE,EADJ,qCAII,YAAK,KAAK,CAAEqB,MAAM,CAACE,YAAnB,uBACA,KAAC,SAAD,EACA,KAAK,CAAC,UADN,CAEA,YAAY,CAAC,UAFb,CAGA,OAAO,CAAC,UAHR,CAIA,IAAI,CAAC,UAJL,CAKA,KAAK,CAAE,KAAKpC,KAAL,CAAWD,QALlB,CAMA,QAAQ,CAAE,KAAKiB,QANf,EADA,EAJJ,cAeI,YAAK,KAAK,CAAEkB,MAAM,CAACE,YAAnB,uBACA,KAAC,SAAD,EACA,IAAI,CAAC,UADL,CAEA,KAAK,CAAC,UAFN,CAGA,YAAY,CAAC,UAHb,CAIA,OAAO,CAAC,UAJR,CAKA,IAAI,CAAC,UALL,CAMA,KAAK,CAAE,KAAKpC,KAAL,CAAWC,QANlB,CAOA,QAAQ,CAAE,KAAKe,QAPf,EADA,EAfJ,cA8BG,YAAK,KAAK,CAAEkB,MAAM,CAACE,YAAnB,uBACC,KAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,WAAlC,CAA8C,OAAO,CAAE,KAAKzD,OAAL,CAAayC,IAAb,CAAkB,IAAlB,CAAvD,mBADD,EA9BH,GAFJ,GARJ,GADJ,CAgDH,C,4BA9HwBlD,KAAK,CAACmE,S,EAkInC,GAAMH,CAAAA,MAAM,CAAE,CACVC,MAAM,CAAE,CACJG,OAAO,CAAE,MADL,CAEJC,cAAc,CAAE,QAFZ,CADE,CAMVH,YAAY,CAAE,CACVE,OAAO,CAAE,MADC,CAEVC,cAAc,CAAE,QAFN,CAGVC,KAAK,CAAE,SAHG,CAIVrD,MAAM,CAAE,MAJE,CANJ,CAAd,CAeA,cAAeM,CAAAA,cAAf","sourcesContent":["\n\n import React from 'react';\n import AppBar from '@material-ui/core/AppBar';\n import Toolbar from '@material-ui/core/Toolbar';\n import TextField from '@material-ui/core/TextField';\n import Button from '@material-ui/core/Button';\n import Typography from '@material-ui/core/Typography';\n import Container from '@material-ui/core/Container';\n import AuthService from './AuthService';\n import axios from 'axios';\n import { doLogin } from \"../../actions/loginActions\";\n import base64 from \"base-64\";\n import utf8 from \"utf8\";\n import { useHistory } from \"react-router-dom\";\n import { makeStyles } from '@material-ui/core/styles';\n \n const useStyles = makeStyles((theme) => ({\n   root: {\n     '& .MuiTextField-root': {\n       margin: theme.spacing(1),\n       width: '25ch',\n     },\n   },\n }));\n \n\n\n \n function Historico() {\n \n     const  history =  useHistory();\n     const classes = useStyles();\n \n \n }\n \n \n class LoginComponent extends React.Component {\n \n \n     constructor(props){\n         super(props);\n         this.state = {\n             username: '',\n             password: '',\n             message: '',\n         }\n         this.login = this.login.bind(this);\n     }\n \n     componentDidMount() {\n         localStorage.clear();\n \n     }\n \n \n   doLogin() {  \t\n     //this.props.dispatch(\n     //    let url =  'https://localhost:8443/api/authentication?username=' + this.state.username +  '&password=' + base64.encode(utf8.encode(this.state.password))    \n       \n     let url =  '/api/authentication?username=' + this.state.username +  '&password=' + base64.encode(utf8.encode(this.state.password))    \n       \n  \n     axios.post(url)\n            .then((response) => {    \n\n                let variavel = response.data;\n\n                let token = variavel.split(\"token:\")[1].split(\",\")[0]\n                let username = variavel.split(\"username:\")[1].split(\",\")[0]\n                let cnpj = variavel.split(\"cnpj:\")[1].split(\",\")[0]\n                let role = variavel.split(\"role:\")[1].split(\",\")[0].split('}')[0]\n\n\n                localStorage.setItem( \"token\", token );\n                localStorage.setItem( \"username\", username );\n                localStorage.setItem( \"role\", role );\n                localStorage.setItem( \"cnpj\", cnpj );\n                \n                \n                 if (role==\"ADMIN\") {\n                     this.props.history.push(\"/menuadmin\");\n                }\n                else {\n                    this.props.history.push(\"/menuuser\");\n\n                }    \n \n\n\n                \n            })\n            .catch((err) => {\n              alert('Erro na autenticação ' + err)\n            })  }\n \n      login = (e) => {\n         e.preventDefault();\n         const credentials = {username: this.state.username, password: this.state.password};\n         AuthService.login(credentials).then(res => {\n             if(res.data.status === 200){\n                 localStorage.setItem(\"userInfo\", JSON.stringify(res.data.result));\n                 this.props.history.push('/list-user');\n             }else {\n                 this.setState({message: res.data.message});\n             }\n \n             console.log(credentials)\n         });\n     }; \n  \n     onChange = (e) => { this.setState({ [e.target.name]: e.target.value}); }\n\n\n     render() {\n         return(\n             <React.Fragment>\n                 <AppBar position=\"static\">\n                     <Toolbar>\n                         <Typography variant=\"h6\" align=\"center\">\n                             NfView - Visualização de NFes\n                         </Typography>\n                     </Toolbar>\n                 </AppBar>\n                 <Container maxWidth=\"sm\">\n                     <Typography variant=\"h6\" style={styles.center}>Login</Typography>\n                     <form>\n                         <Typography variant=\"h6\" style={styles.notification}>{this.state.message}</Typography>\n                         \n {/*                         <TextField type=\"text\" label=\"USERNAME\" fullWidth margin=\"normal\" name=\"username\" value={this.state.username} onChange={this.onChange}/>\n  */}                    <div style={styles.notification}>\n                         <TextField\n                         label=\"Username\"\n                         defaultValue=\"Username\"\n                         variant=\"outlined\"\n                         name=\"username\" \n                         value={this.state.username} \n                         onChange={this.onChange}\n                         \n                         />\n                         </div>\n                         <div style={styles.notification}>\n                         <TextField\n                         type=\"password\"\n                         label=\"Password\"\n                         defaultValue=\"password\"\n                         variant=\"outlined\"\n                         name=\"password\" \n                         value={this.state.password} \n                         onChange={this.onChange}\n                         />\n                         </div>\n \n {/*                         <TextField type=\"password\" label=\"PASSWORD\" fullWidth margin=\"normal\" name=\"password\" value={this.state.password} onChange={this.onChange}/>\n  */}\n\n                        <div style={styles.notification}>\n                         <Button variant=\"contained\" color=\"secondary\" onClick={this.doLogin.bind(this)}>Login</Button>\n                         </div>\n                     </form>\n                 </Container>\n             </React.Fragment>\n         )\n     }\n \n }\n \n const styles= {\n     center :{\n         display: 'flex',\n         justifyContent: 'center'\n \n     },\n     notification: {\n         display: 'flex',\n         justifyContent: 'center',\n         color: '#dc3545',\n         margin: '10px'\n     }\n     \n }\n \n export default LoginComponent; "]},"metadata":{},"sourceType":"module"}